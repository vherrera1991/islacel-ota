<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Step 3</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="node_modules/country-select-js/build/css/countrySelect.min.css">
    <link rel="stylesheet" href="css/styles.min.css">
</head>
<body class="mt-4">
    <div class="container">
        <div class="row no-gutters">
            <a href="#" class="d-none d-lg-block position-absolute mt-4">< Regresar</a>
            <a href="#" class="d-block d-lg-none col-12 text-center mb-4">< Regresar</a>

            <div class="col-lg-5 mx-auto">
                <div class="d-flex flex-column justify-content-center align-items-center">
                    <img src="img/logo-mini.svg" alt="Logo">
                    <h3 class="mt-2 text-success">Recarga Cubacel</h3>

                    <h5 class="font-weight-lighter mt-5 mb-3">Método de pago</h5>

                    <form action="" class="d-flex flex-column align-self-stretch payment-selection-form">
                        <input type="hidden" name="payment" id="selected-payment" value="">

                        <div class="card" data-value="0">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <img src="img/icon-card-mastercard.png" alt="Mastercard">
                                    <span class="flex-grow-1 text-primary ml-2">Yasmany</span>
                                    <span class="d-none d-sm-block">**** 8454</span>
                                    <a href="#" class="delete-link">Eliminar</a>
                                </div>
                            </div>
                        </div>

                        <div class="card" data-value="1">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <img src="img/icon-card-visa.png" alt="Visa">
                                    <span class="flex-grow-1 text-primary ml-2">Yamilka</span>
                                    <span class="d-none d-sm-block">**** 2342</span>
                                    <a href="#" class="delete-link">Eliminar</a>
                                </div>
                            </div>
                        </div>

                        <div class="card" data-value="2">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <img src="img/icon-card-discover.png" alt="Discover">
                                    <span class="flex-grow-1 text-primary ml-2">Sergio</span>
                                    <span class="d-none d-sm-block">**** 4435</span>
                                    <a href="#" class="delete-link">Eliminar</a>
                                </div>
                            </div>
                        </div>

                        <div class="card add">
                            <div class="card-body">
                                <a href="#" id="new-payment-btn" class="stretched-link">Usar una nueva tarjeta</a>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary align-self-center mt-5">Siguiente</button>
                    </form>
                </div>
            </div>
        </div>

        <div id="payment-form" class="row no-gutters d-none">
            <div class="col-lg-8 mx-auto">
                <h6 class="mt-4 ml-4">Nuevo método de pago</h6>
                <form action="">
                    <div class="card shadow-lg px-4">
                        <div class="card-body">
                            <div class="form-row">
                                <div class="col-md-6">
                                    <div class="md-form form-sm">
                                        <input type="text" id="paymentNumber" name="paympaymentNumberentId" class="form-control form-control-sm">
                                        <label for="paymentNumber">Número de tarjeta</label>
                                    </div>
                                </div>
                                <div class="col-12 col-sm-6 col-md-3">
                                    <div class="md-form form-sm">
                                        <input type="text" id="expiration" name="expiration" class="form-control form-control-sm">
                                        <label for="expiration">Expira</label>
                                    </div>
                                </div>
                                <div class="col-12 col-sm-6 col-md-3">
                                    <div class="md-form form-sm">
                                        <input type="text" id="cvv" name="cvv" class="form-control form-control-sm">
                                        <label for="cvv">CVV</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-12 col-sm-6">
                                    <div class="md-form form-sm">
                                        <input type="text" id="paymentName" name="paymentName" class="form-control form-control-sm">
                                        <label for="paymentName">Nombre de la tarjeta</label>
                                    </div>
                                </div>
                                <div class="col-12 col-sm-6">
                                    <div class="md-form form-sm">
                                        <input type="text" id="address" name="address" class="form-control form-control-sm">
                                        <label for="address">Dirección</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-12 col-sm-6">
                                    <div class="md-form form-sm">
                                        <input type="text" id="country" name="country" class="form-control form-control-sm">
                                        <input type="hidden" id="country_code">
                                        <label for="country" class="country-select-label">País</label>
                                    </div>
                                </div>
                                <div class="col-12 col-sm-6">
                                    <div class="md-form form-sm">
                                        <input type="text" id="postalCode" name="postalCode" class="form-control form-control-sm">
                                        <label for="postalCode">Código postal</label>
                                    </div>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-link pl-0 shadow-none">Guardar</button>
                            <button type="reset" class="btn btn-link pl-0 shadow-none">Cancelar</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <footer>
            <hr/>
            &copy; <script>document.write(new Date().getFullYear())</script> Islacel Corporation. Todos los derechos reservados.
        </footer>
    </div>

    <script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/country-select-js/build/js/countrySelect.min.js"></script>
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="node_modules/mdbootstrap/js/mdb.min.js"></script>

    <script type="text/javascript">
        $(function () {
            const option = $('.payment-selection-form > .card[data-value]')
            const deleteLink = $('.payment-selection-form > .card[data-value] a')

            option.addClass('unselected')
            const selectedVal = $('#selected-payment').val()
            if (selectedVal || selectedVal === 0) {
                $("[data-value='" + selectedVal + "']").addClass('selected').removeClass('unselected')
            }

            option.click(function () {
                $(this).parent().find('.card[data-value]').removeClass('selected unselected').addClass('unselected')
                $(this).addClass('selected').removeClass('unselected')
                const val = $(this).attr('data-value')
                $('#selected-payment').val(val)
            })

            deleteLink.click(function (event) {
                event.stopPropagation()
            })

            $('#country').countrySelect({
                preferredCountries: ["us", "es", "mx"]
            })

            $('button[type=reset]').click(function (event) {
                event.preventDefault()
                const fields = $('input[type=text]:not(#country)')
                fields.val('')
                $('#payment-form').addClass('d-none')
                $('.card.add').removeClass('d-none')
                $('.payment-selection-form button').removeClass('d-none')
            })

            $('#new-payment-btn').click(function (event) {
                event.preventDefault()
                $('#payment-form').removeClass('d-none')
                $('.card.add').addClass('d-none')
                $('.payment-selection-form button').addClass('d-none')
            })
        })
    </script>
</body>
</html>